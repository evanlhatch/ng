watch_file shell.nix
watch_file devenv.nix

# Prefer flake, fall back to devenv if needed
use flake || {
  if type devenv &>/dev/null; then
    echo "Falling back to devenv..."
    use devenv
  else
    echo "Error: Both flake and devenv failed"
    exit 1
  fi
}
